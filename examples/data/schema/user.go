package schema

import (
	. "github.com/go-kenka/mongox/dsl"
	"time"
)

var _ = Collection("user",
	Database("db1"),
	Desc("用户表"),
	Fields(
		Field("_id",
			Type(TypeObjectID),
			Comment("ID"),
		),
		Field("string",
			Type(TypeString),
			Comment("字符串"),
		),
		Field("double",
			Type(TypeDouble),
			Comment("浮点数"),
		),
		Field("bin",
			Type(TypeBinData),
			Comment("二进制"),
		),
		Field("bool",
			Type(TypeBoolean),
			Comment("布尔"),
		),
		Field("date",
			Type(TypeDate),
			Comment("日期"),
		),
		Field("int",
			Type(TypeInteger),
			Comment("整型"),
		),
		Field("timestamp",
			Type(TypeTimestamp),
			Comment("时间戳"),
		),
		Field("decimal",
			Type(TypeDecimal),
			Comment("高精度小数"),
		),
		Field("object",
			Type(TypeObject),
			ObjectAttr(
				Field("object_id",
					Type(TypeObjectID),
					Comment("ID"),
				),
				Field("object_string",
					Type(TypeString),
					Comment("字符串"),
				),
				Field("object_double",
					Type(TypeDouble),
					Comment("浮点数"),
				),
				Field("object_bin",
					Type(TypeBinData),
					Comment("二进制"),
				),
				Field("object_bool",
					Type(TypeBoolean),
					Comment("布尔"),
				),
				Field("object_date",
					Type(TypeDate),
					Comment("日期"),
				),
				Field("object_int",
					Type(TypeInteger),
					Comment("整型"),
				),
				Field("object_timestamp",
					Type(TypeTimestamp),
					Comment("时间戳"),
				),
				Field("object_decimal",
					Type(TypeDecimal),
					Comment("高精度小数"),
				),
				Field("object1",
					Type(TypeObject),
					ObjectAttr(
						Field("object1_id",
							Type(TypeObjectID),
							Comment("ID"),
						),
						Field("object1_string",
							Type(TypeString),
							Comment("字符串"),
						),
						Field("object1_double",
							Type(TypeDouble),
							Comment("浮点数"),
						),
						Field("object1_bin",
							Type(TypeBinData),
							Comment("二进制"),
						),
						Field("object1_bool",
							Type(TypeBoolean),
							Comment("布尔"),
						),
						Field("object1_date",
							Type(TypeDate),
							Comment("日期"),
						),
						Field("object1_int",
							Type(TypeInteger),
							Comment("整型"),
						),
						Field("object1_timestamp",
							Type(TypeTimestamp),
							Comment("时间戳"),
						),
						Field("object1_decimal",
							Type(TypeDecimal),
							Comment("高精度小数"),
						),
					),
					Comment("对象结构"),
				),
			),
			Comment("对象结构"),
		),
		Field("array_string",
			Type(TypeArray),
			ArrayType(TypeString),
			Comment("字符串数组"),
		),
		Field("array_object",
			Type(TypeArray),
			ArrayType(TypeObject),
			ObjectAttr(
				Field("array_object_id",
					Type(TypeObjectID),
					Comment("ID"),
				),
				Field("array_object_string",
					Type(TypeString),
					Comment("字符串"),
				),
				Field("array_object_double",
					Type(TypeDouble),
					Comment("浮点数"),
				),
				Field("array_object_bin",
					Type(TypeBinData),
					Comment("二进制"),
				),
				Field("array_object_bool",
					Type(TypeBoolean),
					Comment("布尔"),
				),
				Field("array_object_date",
					Type(TypeDate),
					Comment("日期"),
				),
				Field("array_object_int",
					Type(TypeInteger),
					Comment("整型"),
				),
				Field("array_object_timestamp",
					Type(TypeTimestamp),
					Comment("时间戳"),
				),
				Field("array_object_decimal",
					Type(TypeDecimal),
					Comment("高精度小数"),
				),
			),
			Comment("对象数组"),
		),
	),
	Indexes(
		Index("role_idx",
			Unique(true),
			Background(true),
			Sparse(true),
			Expire(5*time.Second),
			SortKey("role", 1),
		),
	),
)
